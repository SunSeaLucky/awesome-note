---
title: 指数移动平均（EMA，Exponential Moving Average）
date: 2025-11-28 14:25:00 +0800
categories: [数学]
tags: [math]
---

偶尔会看到 EMA，之前一直没有去搞懂它是干什么的，今天特地记录一下。

想象一家咖啡店的老板，每天都会收集顾客的满意度评分（1到10分），目标是判断顾客的满意度是正在上升、下降还是保持稳定。如果使用普通的平均线（SMA），我们会计算过去 10 天的平均分：

$$SMA_{t} = \frac{1}{t}\sum_{i=1}^{t}x_i$$

EMA 的核心思想是，今天的满意度评分，对平均线的影响要比 10 天前的评分大得多。新的平均值 = （今天的新评分 × 很大的权重） + （昨天的平均值 × 较小的权重）。

$$EMA_{t}=P_t\times\alpha+EMA_{t-1}\times(1-\alpha),~\alpha=\frac{2}{t+1}$$
  
其中 $P_t$ 是今天的实际满意度评分，$\alpha$ 是平滑因子。很简单，但不看一下确实不知道是什么玩意。不过，这里有一个小问题，为什么 $\alpha=\frac{2}{t+1}$ 就能平滑？

看第 $i$ 相对于第 $0$ 天，当 $i$ 不断增大时，第 $0$ 天的权重逐渐减小。这就说明，总有第 $i$ 天的权重 $>$ 第 $i-1$ 天的权重。这能解释通为什么整体是分式。

设置成 $t+1$ 而非 $t$，则是为了使得第 $i$ 天的权重略大于 $\frac{1}{t}$，有助于平滑。分子上的 $2$ 或许是经验之谈。